# Transhot Hover Actions

Легкое расширение для Chrome/Edge, которое при наведении на любое изображение или видео показывает компактный блок с кнопкой «перевести».

## Возможности
- Автоматически отслеживает наведение на теги `<img>` и `<video>` на любой странице.
- Показывает плавно появляющийся квадратный блок с иконкой перевода.
- Клик по кнопке отправляет изображение на распознавание текста в Google Vision по API-ключу. При успешном ответе кнопка исчезает.
- Во время распознавания вместо кнопки отображается анимированная иконка загрузки.

## Структура
- `manifest.json` — конфигурация расширения (Manifest V3).
- `src/content.js` — логика показа оверлея и обработки кликов.
- `src/background.js` — сервис-воркер, отправляющий кадр в Google Vision.
- `src/styles.css` — оформление блока и иконок.
- `icons/icon48.png`, `icons/icon128.png` — пиктограммы расширения (добавьте свои PNG-файлы в каталог `icons`, см. инструкции ниже).

## Установка для разработки
1. Соберите файлы репозитория в одну папку (ничего собирать не нужно — используется чистый JS/CSS).
2. Откройте `chrome://extensions` или `edge://extensions` и включите «Режим разработчика».
3. Нажмите «Загрузить распакованное» и выберите директорию с этим проектом.
4. Перейдите на любую страницу и наведите курсор на изображение или видео — появится панель действий.

> Кнопки теперь отправляют текущую картинку/кадр в Google Vision; при удачном ответе кнопка исчезает.

### Работа с локальными файлами

- Расширение запрашивает доступ к `file:///*`, хранилищу и загрузкам, чтобы читать и сохранять данные при работе с локальными файлами.
- После установки включите флажок «Разрешить доступ к файлам URL» на странице расширения, чтобы контент-скрипт работал на локальных страницах.

### Настройка ключей Google Vision

- **API key напрямую через переменные**: задайте `GOOGLE_API_KEY` или `GOOGLE_VISION_API_KEY` (можно через `process.env` при сборке или через `globalThis` в рантайме). Значение может быть строкой API-ключа.
- **Сервисный аккаунт напрямую**: положите JSON сервисного аккаунта целиком в `GOOGLE_SERVICE_ACCOUNT_JSON` (аналогично через `process.env` или `globalThis`). Расширение само обменяет его на access token.
- **Через файл**: задайте путь к JSON-файлу/ключу в `GOOGLE_CREDS_PATH` (HTTP(S), file://, абсолютный/относительный путь или `chrome.runtime.getURL`). Файл может содержать API-ключ (`{"apiKey": "..."}`) либо ключ сервисного аккаунта. Если в файле лежит просто строка API-ключа, она тоже будет использована.

## Иконки

В репозитории нет бинарных изображений. Добавьте свои PNG-файлы в папку `icons` с именами:

- `icons/icon48.png` — размер 48×48.
- `icons/icon128.png` — размер 128×128.

Эти пути уже прописаны в `manifest.json`, поэтому достаточно подставить свои изображения.
